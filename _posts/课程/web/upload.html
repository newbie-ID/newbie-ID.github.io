<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
</head>
<body>
<div id="app">
    <el-upload
            class="upload-demo"
            :action='url'
            :on-success="uploadSuccess"
            :on-preview="handlePreview"
            :on-remove="handleRemove"
            accpet=".jpg"
    >
        <el-button size="small" type="primary">
          上传
        </el-button>
    </el-upload>
    <el-image
            style="width: 160px; height: 160px"
            :src="imageUrl"
    >
    </el-image>
    <el-button size="small" type="primary" @click="downloadImage()" >
        获取图片
    </el-button>
</div>
<script src="https://cdn.jsdelivr.net/npm/vue@2.5.16/dist/vue.min.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script src="https://unpkg.com/element-ui/lib/index.js"></script>
<script type="text/javascript">

  let vm = new Vue({
    el: '#app',
    data () {
      return {
          url:'/api/html/uploadImage',
          imageUrl:''
      }
    },
    methods: {
        //上传成功回调
        uploadSuccess(response, file, fileList) {
            if(response == 'ok'){
                this.$message({
                    type:"success",
                    message:"上传成功"
                })
            }
        },
        handlePreview(){

        },
        handleRemove(){

        },
        downloadImage(){
            axios({
                method: 'post',
                url: '/api/html/downloadImage',
                data: {}
            }).then(res => {
                console.log(res);
                this.imageUrl=res.data;
            })
          },
      }
  })
</script>
</body>
</html>